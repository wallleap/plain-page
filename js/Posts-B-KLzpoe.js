import{u as se,a as Z,n as ee,C as ae,D as ie,E as le,g as te,v as I,r as D,c as M,w as F,d as ce,i as x,F as J,k as Y,G as q,B as ue,H as fe,p as w,b as K,l as de,j as E,t as L,m as H,A as z,I as me,J as he}from"./index-CFltwn1q.js";import{_ as pe}from"./MarkdownIt.vue_vue_type_script_setup_true_lang-BJpQSP4O.js";import"./markdown-CGQCjh6-.js";import"./markdown-it-DHWoV2lB.js";import"./markdown-chunk-B5lr28AT.js";function ne(e){return ae()?(ie(e),!0):!1}function g(e){return typeof e=="function"?e():se(e)}const ve=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ge=e=>e!=null,ye=Object.prototype.toString,_e=e=>ye.call(e)==="[object Object]",S=()=>{};function re(e,t){function n(...o){return new Promise((i,d)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(d)})}return n}function be(e,t={}){let n,o,i=S;const d=s=>{clearTimeout(s),i(),i=S};return s=>{const c=g(e),a=g(t.maxWait);return n&&d(n),c<=0||a!==void 0&&a<=0?(o&&(d(o),o=null),Promise.resolve(s())):new Promise((r,f)=>{i=t.rejectOnCancel?f:r,a&&!o&&(o=setTimeout(()=>{n&&d(n),o=null,r(s())},a)),n=setTimeout(()=>{o&&d(o),o=null,r(s())},c)})}}function xe(...e){let t=0,n,o=!0,i=S,d,l,s,c,a;!le(e[0])&&typeof e[0]=="object"?{delay:l,trailing:s=!0,leading:c=!0,rejectOnCancel:a=!1}=e[0]:[l,s=!0,c=!0,a=!1]=e;const r=()=>{n&&(clearTimeout(n),n=void 0,i(),i=S)};return m=>{const h=g(l),p=Date.now()-t,k=()=>d=m();return r(),h<=0?(t=Date.now(),k()):(p>h&&(c||!o)?(t=Date.now(),k()):s&&(d=new Promise((y,v)=>{i=a?v:y,n=setTimeout(()=>{t=Date.now(),o=!0,y(k()),r()},Math.max(0,h-p))})),!c&&!n&&(n=setTimeout(()=>o=!0,h)),o=!1,d)}}function we(e){return e||te()}function ke(e,t=200,n={}){return re(be(t,n),e)}function Ee(e,t=200,n=!1,o=!0,i=!1){return re(xe(t,n,o,i),e)}function Se(e,t=!0,n){we()?Z(e,n):t?e():ee(e)}function P(e){var t;const n=g(e);return(t=n==null?void 0:n.$el)!=null?t:n}const j=ve?window:void 0;function Q(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=j):[t,n,o,i]=e,!t)return S;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const d=[],l=()=>{d.forEach(r=>r()),d.length=0},s=(r,f,m,h)=>(r.addEventListener(f,m,h),()=>r.removeEventListener(f,m,h)),c=F(()=>[P(t),g(i)],([r,f])=>{if(l(),!r)return;const m=_e(f)?{...f}:f;d.push(...n.flatMap(h=>o.map(p=>s(r,h,p,m))))},{immediate:!0,flush:"post"}),a=()=>{c(),l()};return ne(a),a}function Te(){const e=D(!1),t=te();return t&&Z(()=>{e.value=!0},t),e}function De(e){const t=Te();return M(()=>(t.value,!!e()))}function Ae(e,t,n={}){const{root:o,rootMargin:i="0px",threshold:d=.1,window:l=j,immediate:s=!0}=n,c=De(()=>l&&"IntersectionObserver"in l),a=M(()=>{const p=g(e);return(Array.isArray(p)?p:[p]).map(P).filter(ge)});let r=S;const f=D(s),m=c.value?F(()=>[a.value,P(o),f.value],([p,k])=>{if(r(),!f.value||!p.length)return;const y=new IntersectionObserver(t,{root:P(k),rootMargin:i,threshold:d});p.forEach(v=>v&&y.observe(v)),r=()=>{y.disconnect(),r=S}},{immediate:s,flush:"post"}):S,h=()=>{r(),m(),f.value=!1};return ne(h),{isSupported:c,isActive:f,pause(){r(),f.value=!1},resume(){f.value=!0},stop:h}}function Ce(e,t={}){const{window:n=j,scrollTarget:o,threshold:i=0}=t,d=D(!1);return Ae(e,l=>{let s=d.value,c=0;for(const a of l)a.time>=c&&(c=a.time,s=a.isIntersecting);d.value=s},{root:o,window:n,threshold:i}),d}const U=1;function Le(e,t={}){const{throttle:n=0,idle:o=200,onStop:i=S,onScroll:d=S,offset:l={left:0,right:0,top:0,bottom:0},eventListenerOptions:s={capture:!1,passive:!0},behavior:c="auto",window:a=j,onError:r=u=>{console.error(u)}}=t,f=D(0),m=D(0),h=M({get(){return f.value},set(u){k(u,void 0)}}),p=M({get(){return m.value},set(u){k(void 0,u)}});function k(u,A){var _,W,O;if(!a)return;const T=g(e);T&&((O=T instanceof Document?a.document.body:T)==null||O.scrollTo({top:(_=g(A))!=null?_:p.value,left:(W=g(u))!=null?W:h.value,behavior:g(c)}))}const y=D(!1),v=I({left:!0,right:!1,top:!0,bottom:!1}),b=I({left:!1,right:!1,top:!1,bottom:!1}),N=u=>{y.value&&(y.value=!1,b.left=!1,b.right=!1,b.top=!1,b.bottom=!1,i(u))},oe=ke(N,n+o),V=u=>{var A;if(!a)return;const _=((A=u==null?void 0:u.document)==null?void 0:A.documentElement)||(u==null?void 0:u.documentElement)||P(u),{display:W,flexDirection:O}=getComputedStyle(_),T=_.scrollLeft;b.left=T<f.value,b.right=T>f.value;const B=Math.abs(T)<=(l.left||0),G=Math.abs(T)+_.clientWidth>=_.scrollWidth-(l.right||0)-U;W==="flex"&&O==="row-reverse"?(v.left=G,v.right=B):(v.left=B,v.right=G),f.value=T;let C=_.scrollTop;u===a.document&&!C&&(C=a.document.body.scrollTop),b.top=C<m.value,b.bottom=C>m.value;const X=Math.abs(C)<=(l.top||0),$=Math.abs(C)+_.clientHeight>=_.scrollHeight-(l.bottom||0)-U;W==="flex"&&O==="column-reverse"?(v.top=$,v.bottom=X):(v.top=X,v.bottom=$),m.value=C},R=u=>{var A;if(!a)return;const _=(A=u.target.documentElement)!=null?A:u.target;V(_),y.value=!0,oe(u),d(u)};return Q(e,"scroll",n?Ee(R,n,!0,!1):R,s),Se(()=>{try{const u=g(e);if(!u)return;V(u)}catch(u){r(u)}}),Q(e,"scrollend",N,s),{x:h,y:p,isScrolling:y,arrivedState:v,directions:b,measure(){const u=g(e);a&&u&&V(u)}}}function Me(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function We(e,t,n={}){var o;const{direction:i="bottom",interval:d=100,canLoadMore:l=()=>!0}=n,s=I(Le(e,{...n,offset:{[i]:(o=n.distance)!=null?o:0,...n.offset}})),c=D(),a=M(()=>!!c.value),r=M(()=>Me(g(e))),f=Ce(r);function m(){if(s.measure(),!r.value||!f.value||!l(r.value))return;const{scrollHeight:h,clientHeight:p,scrollWidth:k,clientWidth:y}=r.value,v=i==="bottom"||i==="top"?h<=p:k<=y;(s.arrivedState[i]||v)&&(c.value||(c.value=Promise.all([t(s),new Promise(b=>setTimeout(b,d))]).finally(()=>{c.value=null,ee(()=>m())})))}return F(()=>[s.arrivedState[i],f.value],m,{immediate:!0}),{isLoading:a}}const Oe={class:"home"},Pe={key:0,class:"select-none line-height-none slide-enter-1000"},Ie={key:0,class:"m-y-3 flex items-center"},je={class:"mr-3 border-rd bg-gray-100 p-x-2 p-y-1 font-size-3.4 text-gray-400 dark:bg-gray-800 dark:text-gray-600 group-hover:text-gray-500"},Ve={key:0,class:"mr-3 text-gray-400 dark:text-gray-600 group-hover:text-gray-500"},He=E("i",{class:"fa-regular fa-comments mr-1.4"},null,-1),ze={class:"text-gray-400 dark:text-gray-600 group-hover:text-gray-500"},Fe=E("i",{class:"fa-regular fa-eye mr-1.4"},null,-1),Ne={class:"m-0 font-size-8 text-gray-600 font-bold dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-300"},Re={class:"m-y-2 font-size-4 text-gray-400 line-height-normal line-2 dark:text-gray-500 group-hover:text-gray-500 dark:group-hover:text-gray-400"},Be={class:"m-y-4 font-size-3.4 text-gray-400 dark:text-gray-600 group-hover:text-gray-500"},Ge={class:"mr-2"},Xe=E("i",{class:"fa-solid fa-hashtag mr-0.6 font-size-3 text-gray-300 dark:text-gray-700"},null,-1),$e={key:0,class:"text-center"},Je=E("i",{class:"fa-solid fa-circle-notch fa-spin text-gray-400"},null,-1),Ye=[Je],qe={key:1,class:"text-center text-gray-400"},Ke={key:1,class:"animate-blink animate-iteration-infinite text-center font-size-4 text-gray-400"},nt=ce({__name:"Posts",setup(e){const t=I([]);let n=1;const o=D(!1);async function i(l){try{return await me({page:l,pageSize:12})}catch(s){return console.error("Error fetching data:",s),[]}}async function d(){try{const l=t.map(c=>c.id),s=t.length>0?await he(l):{};s?t.forEach(c=>{c.times=s[c.id]||1}):console.error("getCounter failed")}catch(l){console.error("Error fetching data:",l)}}return We(document,async()=>{const l=await i(n++);if(l.length===0){o.value=!0;return}t.push(...l),d()},{distance:120,canLoadMore:()=>!o.value}),(l,s)=>{const c=ue("router-link"),a=fe("slide-in");return w(),x("div",Oe,[(t==null?void 0:t.length)>0?(w(),x("main",Pe,[(w(!0),x(J,null,Y(t,r=>q((w(),x("article",{key:r.id,class:"group mb-12 cursor-pointer"},[K(c,{to:{name:"post",params:{num:Number(r.num)}}},{default:de(()=>{var f;return[(f=r.milestone)!=null&&f.title||r.comments>0?(w(),x("div",Ie,[E("span",je,L(r.milestone.title),1),r.comments>0?(w(),x("span",Ve,[He,H(L(r.comments),1)])):z("",!0),E("span",ze,[Fe,H(L(r.times),1)])])):z("",!0),E("h2",Ne,L(r.title),1),E("p",Re,[K(pe,{content:r.summary},null,8,["content"])]),E("p",Be,[E("span",Ge,L(r.date),1),r.labels.length>0?(w(!0),x(J,{key:0},Y(r.labels,m=>(w(),x("span",{key:m.id,class:"mr-1.4"},[Xe,H(L(m.name),1)]))),128)):z("",!0)])]}),_:2},1032,["to"])])),[[a]])),128)),o.value?(w(),x("p",qe," 没有更多文章了~ ")):q((w(),x("p",$e,Ye)),[[a]])])):(w(),x("p",Ke," 文章加载中…… "))])}}});export{nt as default};
